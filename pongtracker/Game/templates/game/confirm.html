{% extends "base.html" %} 
{% load staticfiles %} 

{% block pagetitle %} | Confirm Game{% endblock %} 

{% block head %}
<script>
function() 
	{
		game = {
			/* global game variable */
			'isOver' : false,
			'team1' : {
				1 : 'Team 1, Player 1',
				2 : 'Team 1, Player 2',
				'cups' : {
					1 : false,
					2 : false,
					3 : false,
					4 : false,
					5 : false,
					6 : false
				}
			},
			'team2' : {
				1 : 'Team 2, Player 1',
				2 : 'Team 2, Player 2',
				'cups' : {
					1 : false,
					2 : false,
					3 : false,
					4 : false,
					5 : false,
					6 : false
				}
			}
		}
	}
</script>
<script>
$.ajax(gameid){
	url : '../game/'&gameid&'/info/',
	async : false,
	dataType : 'json',
	success : function(data) {
		game['isOver'] = data.is_over
		game['team1'][1] = data.team1.user1
		game['team1'][2] = data.team1.user2
		game['team2'][1] = data.team2.user1
		game['team2'][2] = data.team2.user2

		for (var cupIdx = 1; cupIdx <= 6; cupIdx++) {
			game['team1']['cups'][cupIdx] = data.team1['cup' + cupIdx]
			game['team2']['cups'][cupIdx] = data.team2['cup' + cupIdx]
		}
	},
	error : function() {
		console.error('could not get JSON')
	}
});
</script>
<link href="{% static 'home-styles.css' %}" rel='stylesheet'type='text/css'>
<link href='{% static 'css/cup-style.css' %}' rel='stylesheet' type='text/css'>
<link href='{% static 'css/scoregame-styles.css' %}' rel='stylesheet' type='text/css'>
{% endblock %} 

{% block pagecontent %}

<h4>Games You Verify</h4>

{% if confirm_games %}
<table>
		<tr>
			<th width="2%">Date</th>
			<th width="6%">Team 1</th>
			<th width="6%">Team 2</th>
			<th width="1%">Outcome</th>
			<th width="1%">
				<div align="left">
					Confirmation
				<div align="center">
			</th>
		</tr>
	
{% for c_game in confirm_games %}
		<tr>
			<td>
				<div align="center">{{ c_game.date_played }}</div>
			</td>
			<td>
				<div align="center">
					<table border="1">
						<center>
							<tr>
								<th>{{ c_game.player1 }} and {{ c_game.player2 }}</th>
							</tr>
							<td>
							{{ c_game.id }}
							</td>
							<td>
							.ajax() 
							<div class="cups rotate-clockwise">
		                        <span class="cup team1 cup1 active"></span>
		                        <br/>
		                        <span class="cup team1 cup2 active"></span>
		                        <span class="cup team1 cup3 active"></span>
		                        <br/>
		                        <span class="cup team1 cup4 active"></span>
		                        <span class="cup team1 cup5 active"></span>
		                        <span class="cup team1 cup6 active"></span>
                    		</div>
						</td>
						</center>
					</table>
				</div>
			</td>
			<td>
				<div align="center">
					<table border="1">
						<center>
							<tr>
								<th>{{ c_game.player3 }} and {{ c_game.player4 }}</th>
							</tr>
							<td>
							<div class="cups rotate-counterclockwise">
		                        <span class="cup team2 cup1 active"></span>
		                        <br/>
		                        <span class="cup team2 cup2 active"></span>
		                        <span class="cup team2 cup3 active"></span>
		                        <br/>
		                        <span class="cup team2 cup4 active"></span>
		                        <span class="cup team2 cup5 active"></span>
		                        <span class="cup team2 cup6 active"></span>
                    		</div>
						</td>
						</center>
					</table>
				</div>
			</td>
			<td><div align="center">{{ c_game.outcome }}</div></td>
			<td>
				<form method = "POST" action = "{{ SITE_URL }}game/{{ c_game.game_id }}/confirm/">
						
							{% csrf_token %}
							<button class="btn" type="submit">
								Confirm
							</button>
				</form>
				<form method = "POST" action = "{{ SITE_URL }}game/{{ c_game.game_id }}/deny/">
							{% csrf_token %}
							<button class="btn" type="submit">
								Deny
							</button>
				</form>
			</td>
		</tr>
{% endfor %}
</table>

{% else %}
You have no games to verify.
{% endif %}


<h4>Games To Be Verified By The Opposing Team</h4>
{% if opponent_confirm_games %}
<table>
	<tr>
		<th width="2%">Date</th>
		<th width="6%">Team 1</th>
		<th width="6%">Team 2</th>
		<th width="1%">Outcome</th>
	</tr>
	{% for o_game in opponent_confirm_games %}
	<tr>
		<td>
			<div align="center">{{ o_game.date_played }}</div>
		</td>
		<td>
			<div align="center">
				<table border="1">
					<center>
						<tr>
							<th>{{ o_game.player1 }} and {{ o_game.player2 }} </th>
						</tr>
						<td> 
							<div class="cups rotate-clockwise">
		                        <span class="cup team1 cup1"></span>
		                        <br/>
		                        <span class="cup team1 cup2 active"></span>
		                        <span class="cup team1 cup3 active"></span>
		                        <br/>
		                        <span class="cup team1 cup4 active"></span>
		                        <span class="cup team1 cup5 active"></span>
		                        <span class="cup team1 cup6 active"></span>
                    		</div>
						</td>
					</center>
				</table>
			</div>
		</td>
		<td>
			<div align="center">
				<table border="1">
					<center>
						<tr>
							<th>{{ o_game.player3 }} and {{ o_game.player4 }}</th>
						</tr>
						<td>
							<div class="cups rotate-counterclockwise">
		                        <span class="cup team2 cup1 active"></span>
		                        <br/>
		                        <span class="cup team2 cup2 active"></span>
		                        <span class="cup team2 cup3 active"></span>
		                        <br/>
		                        <span class="cup team2 cup4 active"></span>
		                        <span class="cup team2 cup5 active"></span>
		                        <span class="cup team2 cup6 active"></span>
                    		</div>
						</td>
					</center>
				</table>
			</div>
		</td>
		<td><div align="center">{{ o_game.outcome }}</div></td>
	</tr>
{% endfor %}
</table>
{% else %}
Your opponents have no games that need verifying.
{% endif %}

{% endblock %}